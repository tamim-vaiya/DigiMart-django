{% extends "base.html" %}
{% load humanize %}

{% block body %}
<div class="max-w-7xl mx-auto px-6 py-8">

    <!-- Sales Summary Cards -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-10">
        <div class="p-6 bg-indigo-50 rounded-2xl shadow text-center">
            <h2 class="text-lg font-semibold text-gray-700">Total Sales</h2>
            <p class="text-2xl font-bold text-indigo-600 mt-2">
                ${{ total_sales.amount__sum|default:0|intcomma }} 
            </p>
        </div>
        <div class="p-6 bg-green-50 rounded-2xl shadow text-center">
            <h2 class="text-lg font-semibold text-gray-700">Yearly Sales</h2>
            <p class="text-2xl font-bold text-green-600 mt-2">
                ${{ yearly_sales.amount__sum|default:0|intcomma }} 
            </p>
        </div>
        <div class="p-6 bg-yellow-50 rounded-2xl shadow text-center">
            <h2 class="text-lg font-semibold text-gray-700">Monthly Sales</h2>
            <p class="text-2xl font-bold text-yellow-600 mt-2">
                ${{ monthly_sales.amount__sum|default:0|intcomma }} 
            </p>
        </div>
        <div class="p-6 bg-red-50 rounded-2xl shadow text-center">
            <h2 class="text-lg font-semibold text-gray-700">Weekly Sales</h2>
            <p class="text-2xl font-bold text-red-600 mt-2">
                ${{ weekly_sales.amount__sum|default:0|intcomma }}
            </p>
        </div>
    </div>

    <!-- Sales Breakdown -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        
        <!-- Daily Sales -->
        <div class="bg-white p-6 rounded-2xl shadow">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">ðŸ“… Daily Sales (Last 30 days)</h2>
            <div class="space-y-2 max-h-80 overflow-y-auto">
                {% for sale in daily_sales_sum %}
                    <div class="flex justify-between border-b py-2">
                        <span>{{ sale.created_on__date }}</span>
                        <span class="font-semibold text-indigo-600">${{ sale.total|intcomma }}</span>
                    </div>
                {% empty %}
                    <p class="text-gray-500">No sales recorded.</p>
                {% endfor %}
            </div>
        </div>

        <!-- Product Sales -->
        <div class="bg-white p-6 rounded-2xl shadow">
            <h2 class="text-xl font-semibold text-gray-700 mb-4">ðŸ“¦ Product Sales (Last 30 days)</h2>
            <div class="space-y-2 max-h-80 overflow-y-auto">
                {% for product in product_sales_sum %}
                    <div class="flex justify-between border-b py-2">
                        <span>{{ product.product__name }}</span>
                        <span class="font-semibold text-green-600">${{ product.total|intcomma }}</span>
                    </div>
                {% empty %}
                    <p class="text-gray-500">No product sales recorded.</p>
                {% endfor %}
            </div>
        </div>
    </div>

</div>
{% endblock body %}
